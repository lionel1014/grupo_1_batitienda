<%- include('../parcials/head') -%>
  
    <body>

        <%- include('../parcials/header') -%>

        <main class="productDetail">
            <h1 class="nombre-PD"><%=product.title%></h1>
            <section class="izquierda">

                <div class="contenedor-img-PD">
                    <img src="<%= product.image %>" alt="imagen-producto"/>
                </div>

                <div class="container-left-bottom">
                    <div class="price-stock">
                        <h4 class="producto-precio">$<%=product.price%></h4>

                        <p class="stock">Stock: <%=product.stock%></p>
                    </div>

                    <div class="contenedor-add-carrito">
                        <!-- <div class="contenedor-cantidad">
                            <input type="number" placeholder="1" value="1" min="1" class="input-quantity"/>
                            
                            <div class="btn-incremento-decremento">
                                <i class="fa-solid fa-chevron-up" id="incremento"></i>
                                <i class="fa-solid fa-chevron-down" id="decremento"></i>
                            </div>
                        </div> -->
                        <div class="input-stepper">
                            <button class="minus"><i class="fa fa-minus"></i></button>
                            <input type="text" value="1" min="1"/>
                            <button class="plus"><i class="fa fa-plus"></i></button>
                          </div>

                        <button class="btn-add-carrito">
                            <i class="fa-solid fa-plus"></i>
                            Añadir al carrito
                        </button>
                    </div>
                </div>    
            </section>
            <section class="derecha">
                <div class="contenedor-info-PD">
                    <div class="contenedor-descripcion">
                        <div class="titulo-descripcion">
                            <h3>Descripción</h3>
                            <div class="admin-acces">
                                <a href="/product/editProduct/<%=product.id%>"><button class="btn"><i class="fa-solid fa-pen-to-square"></i></button></a>
                                <a href="/product/createProduct"><button class="btn"><i class="fa-regular fa-square-plus"></i></button></a>
                                <form action="/product/<%=product.id%>?_method=delete" method="POST" onsubmit="confirmDelete(event)">
                                    <button type="submit" name="delete" class="btn"><i class="fa-solid fa-trash"></i></button>
                                </form>
                            </div>
                        </div>
                        <div class="descripcion-producto-PD">
                            <p>
                                <%= product.description %>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="contenedor-productos-relacionados">
                    <h2>Productos Relacionados</h2>
                    <div class="lista-prodRelacionados">
                        <div class="card">
                            <div class="card-img">
                                <img src="https://acdn.mitiendanube.com/stores/001/017/593/products/ptcol0941-0c54bf680188e0c39016817364362983-640-0.webp" alt="producto-1" />
                            </div>
                            <div class="info-card">
                                <div class="text-product">
                                    <h3>Funko Moon Knight (1047) - Moon Knight (Marvel)</h3>
                                    <p class="category">Funko, Pop!</p>
                                </div>
                                <div class="price"><p class="send-price">$1000</p></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-img">
                                <img src="https://acdn.mitiendanube.com/stores/001/017/593/products/xgcol4001-9f012f1a01a448753c16578248490698-640-0.webp" alt="producto-2" />
                            </div>
                            <div class="info-card">
                                <div class="text-product">
                                    <h3>Funko Killua (1106) Glow Chase - Hunter X Hunter (TV)</h3>
                                    <p class="category">Funko, Pop!</p>
                                </div>
                                <div class="price"><p class="send-price">$1000</p></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-img">
                                <img src="https://acdn.mitiendanube.com/stores/001/017/593/products/ptcol1021-2b1add57e19662b11216818273017423-640-0.webp" alt="producto-3"/>
                            </div>
                            <div class="info-card">
                                <div class="text-product">
                                <h3>Funko Infinite Deku With Eri </h3>
                                <p class="category">Funko, My Hero Academy</p>
                            </div>
                            <div class="price"><p class="send-price">$1000</p></div>
                        </div>
                    </div>
                </div>
            </section>
    
            <!-- <div class="container-additional-information">
                <div class="title-additional-information">
                    <h4><a href="/product/editProduct/<%=product.id%>">Editar producto existente</a></h4>
                </div>
                <div class="title-additional-information">
                    <h4><a href="/product/createProduct">Crear nuevo producto</a></h4>
                </div>
            </div> -->
            <%- include('./parcials/loaderBatman') -%>
        </main>
        <%-include('../parcials/footer')-%>
        <script>
            var stepper = (function() {
            var stepperNumber, decrementButton;
        
            return {
                allSteppers: document.querySelectorAll('.input-stepper'),
        
                checkStepperNumber: function(thisStepper) {
                    var stepperInput = thisStepper.querySelector('input');
                    stepperNumber = stepperInput.value;
                    decrementButton = thisStepper.querySelector('button.minus');
        
                    if (stepperNumber === '0' || stepperNumber <= 0) {
                        decrementButton.disabled = true;
                        stepperInput.value = 0;
                    } else {
                        decrementButton.disabled = false;
                    }
                },
        
                init: function() {
                    stepper.allSteppers.forEach(function(element) {
                        var thisStepperInput = element.querySelector('input');
                        var thisMinusButton = element.querySelector('button.minus');
        
                        if (thisStepperInput.value === '0' || thisStepperInput.value <= 0) {
                            thisMinusButton.disabled = true;
                            thisStepperInput.value = 0;
                        } else {
                            thisMinusButton.disabled = false;
                        }
                    });
                }
            };
        })();
        
        document.querySelectorAll('.input-stepper button.plus').forEach(function(button) {
            button.addEventListener('click', function(e) {
                var thisStepper = e.target.closest('.input-stepper');
                var stepperInput = thisStepper.querySelector('input');
                stepperNumber = parseInt(stepperInput.value);
        
                stepperNumber++;
                stepperInput.value = stepperNumber;
        
                stepper.checkStepperNumber(thisStepper);
            });
        });
        
        document.querySelectorAll('.input-stepper button.minus').forEach(function(button) {
            button.addEventListener('click', function(e) {
                var thisStepper = e.target.closest('.input-stepper');
                var stepperInput = thisStepper.querySelector('input');
                stepperNumber = parseInt(stepperInput.value);
        
                stepperNumber--;
                stepperInput.value = stepperNumber;
        
                stepper.checkStepperNumber(thisStepper);
            });
        });
        
        document.querySelectorAll('.input-stepper input').forEach(function(input) {
            input.addEventListener('blur', function(e) {
                var thisStepper = e.target.closest('.input-stepper');
                stepper.checkStepperNumber(thisStepper);
            });
        });
        
        if (document.querySelectorAll('.input-stepper').length) {
            stepper.init();
        }
        </script>
    </body>

</html>